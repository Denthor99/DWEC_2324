<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Actividad 6.1 - Calculo de la mediana</title>
    <script>
      /*
          Enunciado:
          Calcular de la tarea del tema anterior  (Tarea1 .Tema5 ) , la Mediana, cumpliendo con los requisitos (uso de funciones, no variables globales, etc …)
          */

      // Función encargada de recoger los valores del array. Función sacada de los ejercicios del tema anterior
      function meterValores() {
        var numArray = []; // Declaramos un arreglo vacío
        var numIntroducido;
        var i = 0;

        while (true) {
          numIntroducido = Number(
            prompt(
              "Introduce el valor " +
                i +
                ": \nSi desea dejar de introducir valores, escriba cualquier carácter o cadena"
            )
          );

          if (
            isNaN(numIntroducido) ||
            numIntroducido === null ||
            numIntroducido === ""
          ) {
            break; // Salir del bucle si no se ingresó un número
          }

          numArray[i] = numIntroducido;
          i++;
        }

        return numArray;
      }

      // Funcion que nos indicará el elemento ubicado en la mitad del array (o nos calculará la media de los elementos medios)
      function calculoMediana(valores) {
        var arrayOriginal = valores;
        if (arrayOriginal.length === 0) {
          alert("El arreglo está vacío, no se puede calcular la mediana.");
          return;
        }

        // Usaremos la función .sort() para ordenar el array. Deberemos usar la sintaxis especifica para la ordenación de númericoss
        var arrayOrdenado = arrayOriginal.sort(function (a, b) {
          return a - b;
        });

        // Declaramos dos variables: (mediana: almacenará el valor almacenado en un índice del array/media de indices; 
        //mitadArray: almacenará la posición del elmento ubicado en mitad del array)
        var mediana = 0;
        var mitadArray = Math.floor((arrayOrdenado.length-1) / 2);

        // Dos escenarios
        if (arrayOrdenado.length % 2 != 0) { // Al tener un array cuyo tamaño sea un número impar, tendremos un elemento en el centro del array.
          mediana = arrayOrdenado[mitadArray];
          alert("La mediana del array es de " + mediana);
        } else { // Al ser par, deberemos calcular la media de los dos elementos que estarán en el centro del array.
          mediana =
            ((arrayOrdenado[mitadArray]) + (arrayOrdenado[mitadArray + 1])) / 2;
          alert("La media de la mediana del array es " + mediana);
        }
      }

      // Esta función realizará las operaciones necesarias para el funcionamiento de la actividad (coger valores y calcular la mediana)
      function operaciones() {
        var valores = 0;
        if (valores == 0) {
          valores = meterValores();
        }
        calculoMediana(valores);
      }
    </script>
  </head>
  <body onload="operaciones();"></body>
</html>
